# AUEB-INF384-Node-Express

Instructor Guide: Building a Scalable REST APITarget Audience: Undergraduate CS Students (Java/Python background)Duration: 90–120 MinutesGoal: Transition students from synchronous, threaded programming to asynchronous, event-driven architecture.Part 1: The "Hook" — Explaining the Architecture (15 Mins)1. The Analogy: Starbucks vs. Fine DiningStudents coming from Java/C++ often struggle with the "Single Threaded" concept. Use this analogy to explain the Event Loop :Traditional Server (Multi-threaded): A Fine Dining Restaurant.One waiter (thread) serves one table (request) exclusively.If the customer is thinking (Database Query), the waiter stands there doing nothing.To serve 100 tables, you need 100 waiters. High memory overhead.Node.js (Event Loop): Starbucks.One cashier (Main Thread).You order (Request). The cashier writes your name on the cup and passes it to the barista (Libuv/Worker Pool).The cashier immediately takes the next order. They do not wait for the coffee to brew.When the coffee is ready (Callback/Promise), your name is called.Key Takeaway: Node.js is poor at heavy CPU calculation (calculating Pi), but excellent at handling high-volume I/O (taking orders) .2. Interactive Quiz: Visualizing AsyncWrite this on the board to demonstrate the Task Queue vs. Call Stack :JavaScriptconsole.log("1");
setTimeout(() => console.log("2"), 0);
console.log("3");
Student Guess: 1, 2, 3Actual Output: 1, 3, 2Explanation: Even with 0ms, setTimeout sends the callback to the Task Queue. The Main Thread must finish its current work (printing 3) before it checks the queue.Part 2: The Code-Along — Teaching Notes (60 Mins)Step 1: Project Structure (MVC)Don't let students dump code into index.js. Enforce structure early .Analogy: "Imagine a library where all books are in one pile. MVC is the shelving system."Models: The Blueprints (Data Schemas).Controllers: The Librarians (Logic).Routes: The Signage (Directions).Step 2: The "Hanging" RequestIntentionally create a route without a response to demonstrate how middleware works.JavaScriptapp.get('/hang', (req, res) => {
    console.log("I received a request!");
    // Intentionally missing res.send()
});
Lesson: Express is a chain. If you don't send a response or call next(), the browser spins forever until it times out.Step 3: The req.body TrapCreate a POST route without app.use(express.json()).Symptom: req.body is undefined.Fix: Explain that Express does not parse JSON bodies by default. You need the "Door Guard" (Middleware) to translate the raw stream into a JavaScript object .Step 4: Async/Await & MongooseEmphasize try/catch blocks in controllers.Explanation: "Async/Await is a pause button. await Todo.create() pauses this specific function until the database replies. While paused, Node.js serves other users."Part 3: Quality Assurance (15 Mins)Live Demo: Integration TestingRun the Jest tests created in the tutorial.Why: "You will break your code tomorrow. Tests tell you what you broke immediately."Interactive: Change a status code in the controller (e.g., 201 to 200) and show the test failing.Part 4: Assessment & Challenge (30 Mins)Verify independent learning by assigning a small feature extension .The Challenge: "Track the Author"Easy: Add an author (String) field to the Mongoose Model.Hard: Add a priority field that can only be "High", "Medium", or "Low" (Teach Mongoose enum).Success Criteria:Student updates models/Todo.js.Student sends a POST request via Postman with the new fields.The database saves the data correctly.Instructor Cheat Sheet: Common ErrorsError MessageCauseExplanation to StudentEADDRINUSEPort 3000 is busy."You have the server running in another terminal. Kill it (Ctrl+C) or change the PORT in.env."req.body is undefinedMissing Middleware."Did you add app.use(express.json())? Did you select 'JSON' in Postman?"MongoParseErrorBad Connection String."Check your .env file. Do you have quotes around the URL? (Remove them if using certain dotenv versions) or is the variable undefined?"UnhandledPromiseRejectionMissing Error Handling."You forgot to wrap your await code in a try/catch block."Recommended Resources for StudentsEvent Loop Visualization: latentflip.com/loupeMongoose Schemas: mongoosejs.com/docs/guide.htmlVS Code Debugging: Show them how to use the "Attach to Node" feature instead of console.log.1
